<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="2393px" preserveAspectRatio="none" style="width:2926px;height:2393px;background:#FFFFFF;" version="1.1" viewBox="0 0 2926 2393" width="2926px" zoomAndPan="magnify"><title>Sprint 5: Webhook Processing &amp; Monitoring Flow</title><defs/><g><g class="title" data-source-line="2"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="609.7051" x="1157.076" y="35.4209">Sprint 5: Webhook Processing &amp; Monitoring Flow</text></g><rect fill="#FFFFFF" height="20.9531" style="stroke:#FFFFFF;stroke-width:1;" width="2903.8572" x="10" y="54.3545"/><path d="M700.979,80.3076 L700.979,119.1396 L680.979,123.1396 L700.979,127.1396 L700.979,165.9717 A0,0 0 0 0 700.979,165.9717 L865.5122,165.9717 A0,0 0 0 0 865.5122,165.9717 L865.5122,90.3076 L855.5122,80.3076 L700.979,80.3076 A0,0 0 0 0 700.979,80.3076" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M855.5122,80.3076 L855.5122,90.3076 L865.5122,90.3076 L855.5122,80.3076" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104.9395" x="706.979" y="97.3745">Trigger Event:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.2578" x="706.979" y="112.5073">- Payment succeeded</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="143.5332" x="706.979" y="127.6401">- Subscription created</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="87.5151" x="706.979" y="142.7729">- Invoice paid</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.7852" x="706.979" y="157.9058">- Refund processed</text><ellipse cx="670.979" cy="123.1396" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="154.209" x="593.8745" y="185.9717"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="134.209" x="603.8745" y="207.1104">Payment event occurs</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="185.4453" x="578.2563" y="239.9404"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="165.4453" x="588.2563" y="261.0791">Generate webhook payload</text><rect fill="#FFFFFF" height="1862.5469" style="stroke:#000000;stroke-width:1;" width="1145.3145" x="16" y="524.3389"/><path d="M171.2158,524.3389 L171.2158,533.6357 L161.2158,543.6357 L16,543.6357" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="145.2158" x="19" y="538.334">Webhook Processing</text><path d="M205.3574,649.2998 L205.3574,992.2217 L614.4849,992.2217 L614.4849,659.2998 L604.4849,649.2998 L205.3574,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M604.4849,649.2998 L604.4849,659.2998 L614.4849,659.2998 L604.4849,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="212.8115" x="211.3574" y="666.3667">Admin Monitoring and Retry:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="211.3574" y="681.4995">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="194.0352" x="211.3574" y="696.6323">1. Admin opens Webhook Log</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="298.5747" x="211.3574" y="711.7651">2. WebhookLogView displays failed webhooks</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="272.5684" x="211.3574" y="726.8979">3. Admin clicks "Retry" on failed webhook</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="286.9141" x="211.3574" y="742.0308">4. webhookStore.retryWebhook(webhookId)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="388.1274" x="211.3574" y="757.1636">5. WebhookService: POST /api/v1/admin/webhooks/:id/retry</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247.6919" x="211.3574" y="772.2964">6. Backend: Load webhook_log record</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="226.4463" x="211.3574" y="787.4292">7. Backend: Increment retry_count</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="250.1421" x="211.3574" y="802.562">8. Backend: Update status = 'retrying'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="256.9087" x="211.3574" y="817.6948">9. Backend: Re-process webhook event</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="211.3574" y="832.8276">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="137.1348" x="211.3574" y="847.9604">If retry successful:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.8335" x="211.3574" y="863.0933">- status = 'delivered'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133.5229" x="211.3574" y="878.2261">- Clear next_retry_at</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="211.3574" y="893.3589">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106.7676" x="211.3574" y="908.4917">If failed again:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.0903" x="211.3574" y="923.6245">- status = 'failed'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.3315" x="211.3574" y="938.7573">- Schedule next retry</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="211.3574" y="953.8901">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="284.6924" x="211.3574" y="969.0229">10. WebhookLogView: Update status badge</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="260.1777" x="211.3574" y="984.1558">11. WebhookLogView: Show retry count</text><path d="M727.4731,649.2998 L727.4731,1173.8154 L1151.3145,1173.8154 L1151.3145,659.2998 L1141.3145,649.2998 L727.4731,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1141.3145,649.2998 L1141.3145,659.2998 L1151.3145,659.2998 L1141.3145,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="187.1289" x="733.4731" y="666.3667">Service Architecture (DI):</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="733.4731" y="681.4995">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.7666" x="733.4731" y="696.6323">```typescript</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="355.4624" x="733.4731" y="711.7651">class WebhookService implements IWebhookService {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="283.4546" x="741.7378" y="726.8979">constructor(private apiClient: IApiClient) {}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="733.4731" y="742.0308">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="394.5767" x="741.7378" y="757.1636">async retryWebhook(id: number): Promise&lt;WebhookLog&gt; {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.4736" x="750.0024" y="772.2964">// SRP: Only API call</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.4004" x="750.0024" y="787.4292">return await this.apiClient.post(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249.2915" x="758.2671" y="802.562">`/api/v1/admin/webhooks/${id}/retry`</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.0718" x="750.0024" y="817.6948">)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="741.7378" y="832.8276">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="733.4731" y="847.9604">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.3706" x="741.7378" y="863.0933">async getWebhookLogs(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="220.2002" x="750.0024" y="878.2261">params: GetWebhookLogsParams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="334.2104" x="741.7378" y="893.3589">): Promise&lt;PaginatedResponse&lt;WebhookLog&gt;&gt; {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="199.6719" x="750.0024" y="908.4917">return await this.apiClient.get(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.7725" x="758.2671" y="923.6245">{ params }</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.0718" x="750.0024" y="938.7573">)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="741.7378" y="953.8901">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="733.4731" y="969.0229">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5" x="733.4731" y="984.1558">```</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="733.4731" y="999.2886">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138.8359" x="733.4731" y="1014.4214">SOLID Compliance:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="733.4731" y="1029.5542">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.9009" x="742.2964" y="1029.5542">SRP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.3413" x="771.1973" y="1029.5542">: Service only handles API calls</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="733.4731" y="1044.687">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30.1196" x="742.2964" y="1044.687">OCP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="248.5552" x="772.416" y="1044.687">: Can extend with new webhook types</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="733.4731" y="1059.8198">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27.1743" x="742.2964" y="1059.8198">LSP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183.2822" x="769.4707" y="1059.8198">: IWebhookService interface</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="733.4731" y="1074.9526">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.7275" x="742.2964" y="1074.9526">ISP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.1206" x="766.0239" y="1074.9526">: Specific webhook operations</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="733.4731" y="1090.0854">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6279" x="742.2964" y="1090.0854">DI</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.9922" x="757.9243" y="1090.0854">: ApiClient injected</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="733.4731" y="1105.2183">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87.1597" x="733.4731" y="1120.3511">Clean Code:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.9297" x="733.4731" y="1135.4839">- Clear method names</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.2485" x="733.4731" y="1150.6167">- Type-safe parameters</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.7437" x="733.4731" y="1165.7495">- Single responsibility</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="167.3574" x="28" y="2189.8545"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="147.3574" x="38" y="2210.9932">Mark webhook delivered</text><ellipse cx="111.6787" cy="2254.8232" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="111.6787" cy="2254.8232" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><path d="M590.0742,1930.8545 L590.0742,1992.3857 L570.0742,1996.3857 L590.0742,2000.3857 L590.0742,2061.917 A0,0 0 0 0 590.0742,2061.917 L927.2573,2061.917 A0,0 0 0 0 927.2573,2061.917 L927.2573,1940.8545 L917.2573,1930.8545 L590.0742,1930.8545 A0,0 0 0 0 590.0742,1930.8545" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M917.2573,1930.8545 L917.2573,1940.8545 L927.2573,1940.8545 L917.2573,1930.8545" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.1367" x="596.0742" y="1947.9214">```sql</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.7314" x="596.0742" y="1963.0542">UPDATE webhook_logs SET</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="106.3994" x="604.3389" y="1978.187">status = 'failed',</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.7437" x="604.3389" y="1993.3198">error_message = '...',</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="106.2153" x="604.3389" y="2008.4526">retry_count = 0,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="307.9185" x="604.3389" y="2023.5854">next_retry_at = NOW() + INTERVAL '5 minutes'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.4243" x="596.0742" y="2038.7183">WHERE id = log_id</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5" x="596.0742" y="2053.8511">```</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="145.6191" x="424.4551" y="1979.4014"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="125.6191" x="434.4551" y="2000.54">Update webhook_log</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="114.4004" x="440.0645" y="2081.917"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="94.4004" x="450.0645" y="2103.0557">status = 'failed'</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="108.0137" x="443.2578" y="2135.8857"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="88.0137" x="453.2578" y="2157.0244">Schedule retry</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="120.8281" x="436.8506" y="2189.8545"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="100.8281" x="446.8506" y="2210.9932">Return 500 Error</text><path d="M603.5215,2243.8232 L603.5215,2305.3545 L583.5215,2309.3545 L603.5215,2313.3545 L603.5215,2374.8857 A0,0 0 0 0 603.5215,2374.8857 L792.3535,2374.8857 A0,0 0 0 0 792.3535,2374.8857 L792.3535,2253.8232 L782.3535,2243.8232 L603.5215,2243.8232 A0,0 0 0 0 603.5215,2243.8232" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M782.3535,2243.8232 L782.3535,2253.8232 L792.3535,2253.8232 L782.3535,2243.8232" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113.2231" x="609.5215" y="2260.8901">Retry Strategy:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.7969" x="609.5215" y="2276.0229">- Attempt 1: After 5 min</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.0679" x="609.5215" y="2291.1558">- Attempt 2: After 15 min</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.0591" x="609.5215" y="2306.2886">- Attempt 3: After 1 hour</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.832" x="609.5215" y="2321.4214">- Attempt 4: After 6 hours</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.1792" x="609.5215" y="2336.5542">- Max 4 attempts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="609.5215" y="2351.687">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146.5293" x="609.5215" y="2366.8198">Exponential Backoff</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="172.5137" x="411.0078" y="2292.3701"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="152.5137" x="421.0078" y="2313.5088">Schedule automatic retry</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="131.3633" x="977.4106" y="1217.8154"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="111.3633" x="987.4106" y="1238.9541">Log security event</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="171.6699" x="957.2573" y="1286.7842"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="151.6699" x="967.2573" y="1307.9229">Return 401 Unauthorized</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="110.5039" x="987.8403" y="1355.7529"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="90.5039" x="997.8403" y="1376.8916">Mark as invalid</text><ellipse cx="1043.0923" cy="1435.7217" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="1043.0923" cy="1435.7217" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="10" x2="10" y1="54.3545" y2="2386.8857"/><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="160.8301" x="1171.3145" y="293.9092"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="140.8301" x="1181.3145" y="315.0479">Receive webhook POST</text><path d="M1350.7588,337.8779 L1350.7588,422.1084 L1330.7588,426.1084 L1350.7588,430.1084 L1350.7588,514.3389 A0,0 0 0 0 1350.7588,514.3389 L1622.2563,514.3389 A0,0 0 0 0 1622.2563,514.3389 L1622.2563,347.8779 L1612.2563,337.8779 L1350.7588,337.8779 A0,0 0 0 0 1350.7588,337.8779" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1612.2563,337.8779 L1612.2563,347.8779 L1622.2563,347.8779 L1612.2563,337.8779" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65.3555" x="1356.7588" y="354.9448">Request:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.4873" x="1356.7588" y="370.0776">Headers:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.6626" x="1356.7588" y="385.2104">- Stripe-Signature: xxx</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208.2793" x="1356.7588" y="400.3433">- Content-Type: application/json</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1356.7588" y="415.4761">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.1973" x="1356.7588" y="430.6089">Body:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="1356.7588" y="445.7417">{</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98.7949" x="1365.0234" y="460.8745">"id": "evt_xxx",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="242.2329" x="1365.0234" y="476.0073">"type": "payment_intent.succeeded",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="86.9565" x="1365.0234" y="491.1401">"data": { ... }</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="1356.7588" y="506.2729">}</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="158.0586" x="1172.7002" y="409.124"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="138.0586" x="1182.7002" y="430.2627">POST /webhooks/stripe</text><line style="stroke:#000000;stroke-width:1;" x1="1165.3145" x2="1165.3145" y1="54.3545" y2="2386.8857"/><rect fill="#FFFFFF" height="1862.5469" style="stroke:#000000;stroke-width:1;" width="1274.74" x="1633.2563" y="524.3389"/><path d="M1788.4722,524.3389 L1788.4722,533.6357 L1778.4722,543.6357 L1633.2563,543.6357" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="145.2158" x="1636.2563" y="538.334">Webhook Processing</text><path d="M2524.489,553.6357 L2524.489,592.4678 L2504.489,596.4678 L2524.489,600.4678 L2524.489,639.2998 A0,0 0 0 0 2524.489,639.2998 L2726.1243,639.2998 A0,0 0 0 0 2726.1243,639.2998 L2726.1243,563.6357 L2716.1243,553.6357 L2524.489,553.6357 A0,0 0 0 0 2524.489,553.6357" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2716.1243,553.6357 L2716.1243,563.6357 L2726.1243,563.6357 L2716.1243,553.6357" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65.895" x="2530.489" y="570.7026">Security:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.6353" x="2530.489" y="585.8354">- HMAC SHA256 verification</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.5054" x="2530.489" y="600.9683">- Compare signatures</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.7397" x="2530.489" y="616.1011">- Prevent replay attacks</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.4746" x="2530.489" y="631.2339">- Validate timestamp</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="173.6563" x="2330.8328" y="579.4834"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="153.6563" x="2340.8328" y="600.6221">Verify webhook signature</text><path d="M1952.0393,649.2998 L1952.0393,992.2217 L2361.1667,992.2217 L2361.1667,659.2998 L2351.1667,649.2998 L1952.0393,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2351.1667,649.2998 L2351.1667,659.2998 L2361.1667,659.2998 L2351.1667,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="212.8115" x="1958.0393" y="666.3667">Admin Monitoring and Retry:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1958.0393" y="681.4995">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="194.0352" x="1958.0393" y="696.6323">1. Admin opens Webhook Log</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="298.5747" x="1958.0393" y="711.7651">2. WebhookLogView displays failed webhooks</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="272.5684" x="1958.0393" y="726.8979">3. Admin clicks "Retry" on failed webhook</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="286.9141" x="1958.0393" y="742.0308">4. webhookStore.retryWebhook(webhookId)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="388.1274" x="1958.0393" y="757.1636">5. WebhookService: POST /api/v1/admin/webhooks/:id/retry</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247.6919" x="1958.0393" y="772.2964">6. Backend: Load webhook_log record</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="226.4463" x="1958.0393" y="787.4292">7. Backend: Increment retry_count</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="250.1421" x="1958.0393" y="802.562">8. Backend: Update status = 'retrying'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="256.9087" x="1958.0393" y="817.6948">9. Backend: Re-process webhook event</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1958.0393" y="832.8276">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="137.1348" x="1958.0393" y="847.9604">If retry successful:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.8335" x="1958.0393" y="863.0933">- status = 'delivered'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133.5229" x="1958.0393" y="878.2261">- Clear next_retry_at</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1958.0393" y="893.3589">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106.7676" x="1958.0393" y="908.4917">If failed again:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.0903" x="1958.0393" y="923.6245">- status = 'failed'</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.3315" x="1958.0393" y="938.7573">- Schedule next retry</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1958.0393" y="953.8901">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="284.6924" x="1958.0393" y="969.0229">10. WebhookLogView: Update status badge</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="260.1777" x="1958.0393" y="984.1558">11. WebhookLogView: Show retry count</text><path d="M2474.155,649.2998 L2474.155,1173.8154 L2897.9963,1173.8154 L2897.9963,659.2998 L2887.9963,649.2998 L2474.155,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2887.9963,649.2998 L2887.9963,659.2998 L2897.9963,659.2998 L2887.9963,649.2998" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="187.1289" x="2480.155" y="666.3667">Service Architecture (DI):</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="2480.155" y="681.4995">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.7666" x="2480.155" y="696.6323">```typescript</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="355.4624" x="2480.155" y="711.7651">class WebhookService implements IWebhookService {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="283.4546" x="2488.4197" y="726.8979">constructor(private apiClient: IApiClient) {}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="2480.155" y="742.0308">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="394.5767" x="2488.4197" y="757.1636">async retryWebhook(id: number): Promise&lt;WebhookLog&gt; {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.4736" x="2496.6843" y="772.2964">// SRP: Only API call</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.4004" x="2496.6843" y="787.4292">return await this.apiClient.post(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249.2915" x="2504.949" y="802.562">`/api/v1/admin/webhooks/${id}/retry`</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.0718" x="2496.6843" y="817.6948">)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="2488.4197" y="832.8276">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="2480.155" y="847.9604">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.3706" x="2488.4197" y="863.0933">async getWebhookLogs(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="220.2002" x="2496.6843" y="878.2261">params: GetWebhookLogsParams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="334.2104" x="2488.4197" y="893.3589">): Promise&lt;PaginatedResponse&lt;WebhookLog&gt;&gt; {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="199.6719" x="2496.6843" y="908.4917">return await this.apiClient.get(</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.7725" x="2504.949" y="923.6245">{ params }</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.0718" x="2496.6843" y="938.7573">)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="2488.4197" y="953.8901">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="2480.155" y="969.0229">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5" x="2480.155" y="984.1558">```</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="2480.155" y="999.2886">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138.8359" x="2480.155" y="1014.4214">SOLID Compliance:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="2480.155" y="1029.5542">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.9009" x="2488.9783" y="1029.5542">SRP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.3413" x="2517.8792" y="1029.5542">: Service only handles API calls</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="2480.155" y="1044.687">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30.1196" x="2488.9783" y="1044.687">OCP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="248.5552" x="2519.0979" y="1044.687">: Can extend with new webhook types</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="2480.155" y="1059.8198">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27.1743" x="2488.9783" y="1059.8198">LSP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183.2822" x="2516.1526" y="1059.8198">: IWebhookService interface</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="2480.155" y="1074.9526">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.7275" x="2488.9783" y="1074.9526">ISP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.1206" x="2512.7058" y="1074.9526">: Specific webhook operations</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.6909" x="2480.155" y="1090.0854">-</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6279" x="2488.9783" y="1090.0854">DI</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.9922" x="2504.6062" y="1090.0854">: ApiClient injected</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="2480.155" y="1105.2183">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87.1597" x="2480.155" y="1120.3511">Clean Code:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.9297" x="2480.155" y="1135.4839">- Clear method names</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.2485" x="2480.155" y="1150.6167">- Type-safe parameters</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.7437" x="2480.155" y="1165.7495">- Single responsibility</text><polygon fill="#FFFFFF" points="2373.1667,1173.8154,2462.155,1173.8154,2474.155,1185.8154,2462.155,1197.8154,2373.1667,1197.8154,2361.1667,1185.8154,2373.1667,1173.8154" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="88.9883" x="2373.1667" y="1189.6235">Signature valid?</text><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="2342.1584" y="1183.2212">yes</text><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="91.9263" x="2474.155" y="1183.2212">invalid signature</text><path d="M2158.0066,1217.8154 L2158.0066,1355.0107 L2138.0066,1359.0107 L2158.0066,1363.0107 L2158.0066,1500.2061 A0,0 0 0 0 2158.0066,1500.2061 L2366.8528,1500.2061 A0,0 0 0 0 2366.8528,1500.2061 L2366.8528,1227.8154 L2356.8528,1217.8154 L2158.0066,1217.8154 A0,0 0 0 0 2158.0066,1217.8154" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2356.8528,1217.8154 L2356.8528,1227.8154 L2366.8528,1227.8154 L2356.8528,1217.8154" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.1797" x="2164.0066" y="1234.8823">Database Insert:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.1367" x="2164.0066" y="1250.0151">```sql</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187.8462" x="2164.0066" y="1265.1479">INSERT INTO webhook_logs (</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.6987" x="2172.2712" y="1280.2808">event_type,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.5825" x="2172.2712" y="1295.4136">provider,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="44.0781" x="2172.2712" y="1310.5464">status,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="21.3281" x="2172.2712" y="1325.6792">url,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112.9058" x="2172.2712" y="1340.812">request_headers,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.4854" x="2172.2712" y="1355.9448">request_body,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="69.3672" x="2172.2712" y="1371.0776">created_at</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="69.418" x="2164.0066" y="1386.2104">) VALUES (</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="33.0713" x="2172.2712" y="1401.3433">{...},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="33.0713" x="2172.2712" y="1416.4761">{...},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="42.9546" x="2172.2712" y="1431.6089">NOW()</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.0718" x="2164.0066" y="1446.7417">)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5" x="2164.0066" y="1461.8745">```</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="2164.0066" y="1477.0073">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99.728" x="2164.0066" y="1492.1401">Initial Status:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.8442" x="2267.8669" y="1492.1401">pending</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="184.918" x="1953.0886" y="1342.0264"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="164.918" x="1963.0886" y="1363.165">Create webhook_log record</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="129.9336" x="1980.5808" y="1520.2061"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="109.9336" x="1990.5808" y="1541.3447">status = 'pending'</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="161.8555" x="1964.6199" y="1574.1748"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="141.8555" x="1974.6199" y="1595.3135">Process webhook event</text><polygon fill="#FFFFFF" points="1706.0437,1628.1436,1765.6252,1628.1436,1777.6252,1640.1436,1765.6252,1652.1436,1706.0437,1652.1436,1694.0437,1640.1436,1706.0437,1628.1436" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="111.563" x="1739.8345" y="1662.354">payment.succeeded</text><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="59.5815" x="1706.0437" y="1643.9517">Event type</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="163.3496" x="1654.1597" y="1684.9482"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="143.3496" x="1664.1597" y="1706.0869">Update payment record</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="181.1563" x="1645.2563" y="1753.917"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="161.1563" x="1655.2563" y="1775.0557">Update subscription status</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="167.0117" x="1652.3286" y="1822.8857"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="147.0117" x="1662.3286" y="1844.0244">Send confirmation email</text><polygon fill="#FFFFFF" points="1896.4604,1628.1436,2019.4907,1628.1436,2031.4907,1640.1436,2019.4907,1652.1436,1896.4604,1652.1436,1884.4604,1640.1436,1896.4604,1628.1436" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="123.0303" x="1896.4604" y="1643.9517">subscription.cancelled</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="181.1563" x="1867.3975" y="1672.1436"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="161.1563" x="1877.3975" y="1693.2822">Update subscription status</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="179.4043" x="1868.2734" y="1741.1123"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="159.4043" x="1878.2734" y="1762.251">Calculate refund if needed</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="163.4902" x="1876.2305" y="1810.0811"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="143.4902" x="1886.2305" y="1831.2197">Send cancellation email</text><polygon fill="#FFFFFF" points="2106.9839,1628.1436,2173.3813,1628.1436,2185.3813,1640.1436,2173.3813,1652.1436,2106.9839,1652.1436,2094.9839,1640.1436,2106.9839,1628.1436" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="66.3975" x="2106.9839" y="1643.9517">invoice.paid</text><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="81.7266" x="2185.3813" y="1637.5493">refund.created</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="143.2578" x="2068.5537" y="1672.1436"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="123.2578" x="2078.5537" y="1693.2822">Mark invoice as paid</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="121.8125" x="2079.2764" y="1741.1123"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="101.8125" x="2089.2764" y="1762.251">Generate receipt</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="132.8984" x="2073.7334" y="1810.0811"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="112.8984" x="2083.7334" y="1831.2197">Send receipt email</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="214.0273" x="2231.8115" y="1716.0303"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="194.0273" x="2241.8115" y="1737.1689">Update payment refund amount</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="164.7031" x="2256.4736" y="1784.999"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="144.7031" x="2266.4736" y="1806.1377">Send refund notification</text><polygon fill="#FFFFFF" points="1982.8293,1896.8545,2108.2659,1896.8545,2120.2659,1908.8545,2108.2659,1920.8545,1982.8293,1920.8545,1970.8293,1908.8545,1982.8293,1896.8545" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="125.4365" x="1982.8293" y="1912.6626">Processing successful?</text><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="1951.821" y="1906.2603">yes</text><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacing" textLength="93.4946" x="2120.2659" y="1906.2603">processing failed</text><path d="M1939.9583,1930.8545 L1939.9583,1992.3857 L1919.9583,1996.3857 L1939.9583,2000.3857 L1939.9583,2061.917 A0,0 0 0 0 1939.9583,2061.917 L2137.6897,2061.917 A0,0 0 0 0 2137.6897,2061.917 L2137.6897,1940.8545 L2127.6897,1930.8545 L1939.9583,1930.8545 A0,0 0 0 0 1939.9583,1930.8545" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2127.6897,1930.8545 L2127.6897,1940.8545 L2137.6897,1940.8545 L2127.6897,1930.8545" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.1367" x="1945.9583" y="1947.9214">```sql</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.7314" x="1945.9583" y="1963.0542">UPDATE webhook_logs SET</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131.1426" x="1954.2229" y="1978.187">status = 'delivered',</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.8799" x="1954.2229" y="1993.3198">response_status = 200,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.2109" x="1954.2229" y="2008.4526">response_body = {...},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.4351" x="1954.2229" y="2023.5854">delivered_at = NOW()</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.4243" x="1945.9583" y="2038.7183">WHERE id = log_id</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5" x="1945.9583" y="2053.8511">```</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="145.6191" x="1774.3391" y="1979.4014"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="125.6191" x="1784.3391" y="2000.54">Update webhook_log</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="137.2402" x="1778.5286" y="2081.917"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="117.2402" x="1788.5286" y="2103.0557">status = 'delivered'</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="108.418" x="1792.9397" y="2135.8857"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="88.418" x="1802.9397" y="2157.0244">Return 200 OK</text><line style="stroke:#000000;stroke-width:1;" x1="1627.2563" x2="1627.2563" y1="54.3545" y2="2386.8857"/><line style="stroke:#000000;stroke-width:1;" x1="2911.9963" x2="2911.9963" y1="54.3545" y2="2386.8857"/><line style="stroke:#000000;stroke-width:1;" x1="670.979" x2="670.979" y1="133.1396" y2="185.9717"/><polygon fill="#000000" points="666.979,175.9717,670.979,185.9717,674.979,175.9717,670.979,179.9717" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="670.979" x2="670.979" y1="219.9404" y2="239.9404"/><polygon fill="#000000" points="666.979,229.9404,670.979,239.9404,674.979,229.9404,670.979,233.9404" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="111.6787" x2="111.6787" y1="2223.8232" y2="2243.8232"/><polygon fill="#000000" points="107.6787,2233.8232,111.6787,2243.8232,115.6787,2233.8232,111.6787,2237.8232" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="497.2646" x2="497.2646" y1="2013.3701" y2="2081.917"/><polygon fill="#000000" points="493.2646,2071.917,497.2646,2081.917,501.2646,2071.917,497.2646,2075.917" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="497.2646" x2="497.2646" y1="2115.8857" y2="2135.8857"/><polygon fill="#000000" points="493.2646,2125.8857,497.2646,2135.8857,501.2646,2125.8857,497.2646,2129.8857" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="497.2646" x2="497.2646" y1="2169.8545" y2="2189.8545"/><polygon fill="#000000" points="493.2646,2179.8545,497.2646,2189.8545,501.2646,2179.8545,497.2646,2183.8545" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="497.2646" x2="497.2646" y1="2223.8232" y2="2292.3701"/><polygon fill="#000000" points="493.2646,2282.3701,497.2646,2292.3701,501.2646,2282.3701,497.2646,2286.3701" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1043.0923" x2="1043.0923" y1="1251.7842" y2="1286.7842"/><polygon fill="#000000" points="1039.0923,1276.7842,1043.0923,1286.7842,1047.0923,1276.7842,1043.0923,1280.7842" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1043.0923" x2="1043.0923" y1="1320.7529" y2="1355.7529"/><polygon fill="#000000" points="1039.0923,1345.7529,1043.0923,1355.7529,1047.0923,1345.7529,1043.0923,1349.7529" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1043.0923" x2="1043.0923" y1="1389.7217" y2="1424.7217"/><polygon fill="#000000" points="1039.0923,1414.7217,1043.0923,1424.7217,1047.0923,1414.7217,1043.0923,1418.7217" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1251.7295" x2="1251.7295" y1="327.8779" y2="409.124"/><polygon fill="#000000" points="1247.7295,399.124,1251.7295,409.124,1255.7295,399.124,1251.7295,403.124" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2045.5476" x2="2045.5476" y1="1375.9951" y2="1520.2061"/><polygon fill="#000000" points="2041.5476,1510.2061,2045.5476,1520.2061,2049.5476,1510.2061,2045.5476,1514.2061" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2045.5476" x2="2045.5476" y1="1554.1748" y2="1574.1748"/><polygon fill="#000000" points="2041.5476,1564.1748,2045.5476,1574.1748,2049.5476,1564.1748,2045.5476,1568.1748" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1735.8345" x2="1735.8345" y1="1718.917" y2="1753.917"/><polygon fill="#000000" points="1731.8345,1743.917,1735.8345,1753.917,1739.8345,1743.917,1735.8345,1747.917" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1735.8345" x2="1735.8345" y1="1787.8857" y2="1822.8857"/><polygon fill="#000000" points="1731.8345,1812.8857,1735.8345,1822.8857,1739.8345,1812.8857,1735.8345,1816.8857" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1957.9756" x2="1957.9756" y1="1706.1123" y2="1741.1123"/><polygon fill="#000000" points="1953.9756,1731.1123,1957.9756,1741.1123,1961.9756,1731.1123,1957.9756,1735.1123" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1957.9756" x2="1957.9756" y1="1775.0811" y2="1810.0811"/><polygon fill="#000000" points="1953.9756,1800.0811,1957.9756,1810.0811,1961.9756,1800.0811,1957.9756,1804.0811" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2140.1826" x2="2140.1826" y1="1706.1123" y2="1741.1123"/><polygon fill="#000000" points="2136.1826,1731.1123,2140.1826,1741.1123,2144.1826,1731.1123,2140.1826,1735.1123" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2140.1826" x2="2140.1826" y1="1775.0811" y2="1810.0811"/><polygon fill="#000000" points="2136.1826,1800.0811,2140.1826,1810.0811,2144.1826,1800.0811,2140.1826,1804.0811" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2338.8252" x2="2338.8252" y1="1749.999" y2="1784.999"/><polygon fill="#000000" points="2334.8252,1774.999,2338.8252,1784.999,2342.8252,1774.999,2338.8252,1778.999" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1735.8345" x2="1735.8345" y1="1652.1436" y2="1684.9482"/><polygon fill="#000000" points="1731.8345,1674.9482,1735.8345,1684.9482,1739.8345,1674.9482,1735.8345,1678.9482" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1735.8345" x2="1735.8345" y1="1856.8545" y2="1876.8545"/><polygon fill="#000000" points="1731.8345,1866.8545,1735.8345,1876.8545,1739.8345,1866.8545,1735.8345,1870.8545" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1957.9756" x2="1957.9756" y1="1652.1436" y2="1672.1436"/><polygon fill="#000000" points="1953.9756,1662.1436,1957.9756,1672.1436,1961.9756,1662.1436,1957.9756,1666.1436" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1957.9756" x2="1957.9756" y1="1844.0498" y2="1876.8545"/><polygon fill="#000000" points="1953.9756,1866.8545,1957.9756,1876.8545,1961.9756,1866.8545,1957.9756,1870.8545" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2140.1826" x2="2140.1826" y1="1652.1436" y2="1672.1436"/><polygon fill="#000000" points="2136.1826,1662.1436,2140.1826,1672.1436,2144.1826,1662.1436,2140.1826,1666.1436" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2140.1826" x2="2140.1826" y1="1844.0498" y2="1876.8545"/><polygon fill="#000000" points="2136.1826,1866.8545,2140.1826,1876.8545,2144.1826,1866.8545,2140.1826,1870.8545" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1777.6252" x2="1884.4604" y1="1640.1436" y2="1640.1436"/><polygon fill="#000000" points="1874.4604,1636.1436,1884.4604,1640.1436,1874.4604,1644.1436,1878.4604,1640.1436" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2031.4907" x2="2094.9839" y1="1640.1436" y2="1640.1436"/><polygon fill="#000000" points="2084.9839,1636.1436,2094.9839,1640.1436,2084.9839,1644.1436,2088.9839,1640.1436" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2045.5476" x2="2045.5476" y1="1608.1436" y2="1613.1436"/><line style="stroke:#000000;stroke-width:1;" x1="2045.5476" x2="1735.8345" y1="1613.1436" y2="1613.1436"/><line style="stroke:#000000;stroke-width:1;" x1="1735.8345" x2="1735.8345" y1="1613.1436" y2="1628.1436"/><polygon fill="#000000" points="1731.8345,1618.1436,1735.8345,1628.1436,1739.8345,1618.1436,1735.8345,1622.1436" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2185.3813" x2="2338.8252" y1="1640.1436" y2="1640.1436"/><line style="stroke:#000000;stroke-width:1;" x1="2338.8252" x2="2338.8252" y1="1640.1436" y2="1716.0303"/><polygon fill="#000000" points="2334.8252,1706.0303,2338.8252,1716.0303,2342.8252,1706.0303,2338.8252,1710.0303" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2338.8252" x2="2338.8252" y1="1818.9678" y2="1876.8545"/><polygon fill="#000000" points="2334.8252,1866.8545,2338.8252,1876.8545,2342.8252,1866.8545,2338.8252,1870.8545" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1735.8345" x2="2338.8252" y1="1876.8545" y2="1876.8545"/><line style="stroke:#000000;stroke-width:1;" x1="1847.1487" x2="1847.1487" y1="2013.3701" y2="2081.917"/><polygon fill="#000000" points="1843.1487,2071.917,1847.1487,2081.917,1851.1487,2071.917,1847.1487,2075.917" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1847.1487" x2="1847.1487" y1="2115.8857" y2="2135.8857"/><polygon fill="#000000" points="1843.1487,2125.8857,1847.1487,2135.8857,1851.1487,2125.8857,1847.1487,2129.8857" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1970.8293" x2="1847.1487" y1="1908.8545" y2="1908.8545"/><line style="stroke:#000000;stroke-width:1;" x1="1847.1487" x2="1847.1487" y1="1908.8545" y2="1979.4014"/><polygon fill="#000000" points="1843.1487,1969.4014,1847.1487,1979.4014,1851.1487,1969.4014,1847.1487,1973.4014" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2045.5476" x2="2045.5476" y1="1876.8545" y2="1896.8545"/><polygon fill="#000000" points="2041.5476,1886.8545,2045.5476,1896.8545,2049.5476,1886.8545,2045.5476,1890.8545" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2361.1667" x2="2045.5476" y1="1185.8154" y2="1185.8154"/><line style="stroke:#000000;stroke-width:1;" x1="2045.5476" x2="2045.5476" y1="1185.8154" y2="1342.0264"/><polygon fill="#000000" points="2041.5476,1332.0264,2045.5476,1342.0264,2049.5476,1332.0264,2045.5476,1336.0264" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="497.2646" x2="497.2646" y1="2326.3389" y2="2379.8857"/><line style="stroke:#000000;stroke-width:1;" x1="497.2646" x2="2417.6609" y1="2379.8857" y2="2379.8857"/><line style="stroke:#000000;stroke-width:1;" x1="2417.6609" x2="2417.6609" y1="613.4521" y2="1173.8154"/><polygon fill="#000000" points="2413.6609,1163.8154,2417.6609,1173.8154,2421.6609,1163.8154,2417.6609,1167.8154" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="670.979" x2="670.979" y1="273.9092" y2="278.9092"/><line style="stroke:#000000;stroke-width:1;" x1="670.979" x2="1251.7295" y1="278.9092" y2="278.9092"/><line style="stroke:#000000;stroke-width:1;" x1="1251.7295" x2="1251.7295" y1="278.9092" y2="293.9092"/><polygon fill="#000000" points="1247.7295,283.9092,1251.7295,293.9092,1255.7295,283.9092,1251.7295,287.9092" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1847.1487" x2="1847.1487" y1="2169.8545" y2="2174.8545"/><line style="stroke:#000000;stroke-width:1;" x1="1847.1487" x2="111.6787" y1="2174.8545" y2="2174.8545"/><line style="stroke:#000000;stroke-width:1;" x1="111.6787" x2="111.6787" y1="2174.8545" y2="2189.8545"/><polygon fill="#000000" points="107.6787,2179.8545,111.6787,2189.8545,115.6787,2179.8545,111.6787,2183.8545" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2120.2659" x2="2132.2659" y1="1908.8545" y2="1908.8545"/><line style="stroke:#000000;stroke-width:1;" x1="2132.2659" x2="2132.2659" y1="1908.8545" y2="1925.8545"/><line style="stroke:#000000;stroke-width:1;" x1="2132.2659" x2="497.2646" y1="1925.8545" y2="1925.8545"/><line style="stroke:#000000;stroke-width:1;" x1="497.2646" x2="497.2646" y1="1925.8545" y2="1979.4014"/><polygon fill="#000000" points="493.2646,1969.4014,497.2646,1979.4014,501.2646,1969.4014,497.2646,1973.4014" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="2474.155" x2="2486.155" y1="1185.8154" y2="1185.8154"/><line style="stroke:#000000;stroke-width:1;" x1="2486.155" x2="2486.155" y1="1185.8154" y2="1203.8154"/><line style="stroke:#000000;stroke-width:1;" x1="2486.155" x2="1043.0923" y1="1203.8154" y2="1203.8154"/><line style="stroke:#000000;stroke-width:1;" x1="1043.0923" x2="1043.0923" y1="1203.8154" y2="1217.8154"/><polygon fill="#000000" points="1039.0923,1207.8154,1043.0923,1217.8154,1047.0923,1207.8154,1043.0923,1211.8154" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1251.7295" x2="1251.7295" y1="443.0928" y2="519.3389"/><line style="stroke:#000000;stroke-width:1;" x1="1251.7295" x2="2417.6609" y1="519.3389" y2="519.3389"/><line style="stroke:#000000;stroke-width:1;" x1="2417.6609" x2="2417.6609" y1="519.3389" y2="579.4834"/><polygon fill="#000000" points="2413.6609,569.4834,2417.6609,579.4834,2421.6609,569.4834,2417.6609,573.4834" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacing" textLength="160.1543" x="507.5801" y="71.0625">Payment Provider</text><text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacing" textLength="301.5615" x="1245.5046" y="71.0625">Backend API (Webhook Endpoint)</text><text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacing" textLength="77.6074" x="2230.8226" y="71.0625">Backend</text><!--SRC=[nLbPTzis5dxNhy3uzDIIQyjBuxGZpt8KYOarzQAIijC-AJ09IMWeaWKWMHh7_xqNAq6ATZhpCCC7syJz2DnzWVyY5cH9K95YchK45Ib1KS5e9j1v3tqa3uiy_up6B8y9vpIRes_HTPvHaJFvyZxD7rkjBsEyNHBu0c1hcX3sfSK5PgALvO8WHkSBqKBm71nCu6LE60hM0EyT7AZb8sI_vwiu9YGXYLcFLWyyPhGGDCzGp0WMZZJArZcDWMzCxL98PgiiGONc5P04tYGBhLRFda3amIYFunNZ5wtU1v8H1hkYHoDeWRTfZfCB4EeTZZ_B7VhZ4MfRHGHPKkIWdCwNLYyaCQ7hyjlnRJI1FUKlT6mM-J4N802vsDL5I7vV4UwqS4amQ8xthEZgiwE8pZCiLepqq6QpCRH1dWaGusYoBM0T5qLAOonrTFmRpxEMGhtBawtUwqdzH6YF9dizj4VMOWfRxHtQPG6xI4AXLJIbQlEkiqM9JB30W7n2tMuNFQlLPq_91PYSAbFjxVhDdk73glMBUklT4qPdMwT2RiMzKEIQphJU8WB6es9h5QTrSddT7w3eidzs_XQjvQP69Hvaa2-1HL8UmZtYc6dNO0GYOOkm4C2d3xZ7AKsagmYw1BFXPQ68fVZoZSvGsvaChUKd_-mWYB0CjRU4Tzn-lO7oPYluDCtdS7ISi-J2OHgarneOWXqUC2SG19mmuIj2Ffy-VUA_fvMbqKqKX1FuDRdrZ-IeNO4X7HzJwHA7DKfXOhk-3geGArvVNR6qliIqlqyNsj5V8Z-0uzPf9lIdkAg93hhlNzq5qOuK-yQNIoVUhs-vh-DoTxq0YuA_xXBg8Rs3U8AmUFvJYpUt7zkTgYXr2xPgDXz1pgKuXRmWrGqcHuPHXwjwed8oRHlqzrAg2uzgWjC5dxAz1v3Eh18ralvWtNX7jLNMUtU5YX83st5g7yFzzAvvhG4ZALISPpFAbYgS4LbYcfOead8Y-VItwiOuYqcQ0ckAv__ox05EurKgiKmN5ZWdKn8tCgdFV9L9gcjMLzQi9jQkCVkC30XXhcfRxInNi9WiFeLeOiMGchX0RIrBrqJKrsodvCRBV9MzS982WDUvV7lX-oETLRt9QoEK-t0-MwND2TBdnyjOLIvUo90l947vt8s7_KbGpO5HCDd1sRmcOoSXAPHvrf14TDxYHGvvUEe-E3ivUHKeCnp06ZE3VDnvaEy0jviivFFnCWW3H1C0W11JqmJLaqWbjTlyK55navWrKuS4gbacnKAtFrrK4rD3wxVhqZR1k1Eg1t2H5wsQcnQbfyp0Yr_orF-pPsZM6js2C9QpANGA7C-9n8ArN_0VmRRJM8OOm1ez9oCRCTMuqYFGTxAS1o6KGBH_ZfOqMmd2z_y7ZcAahYU4U46ILKgqGCqkT0uk54Z5_8TUvFR6Av7BGX0tdVAApMMt3NZPLOFRpBVrbactU7qXo18IvsaFzMS2nXIbrbU0PnPu-ZNazmw95lcAlO9yOv5l5P8tGA_n1hsHBQhyWBSQf0qsa6f0eR9Za0rtFflL9DunifUkTGX28PBzQzakUzth5RIhtFJXjc-e6_lDoIcwoy1Y2vWL_os3llKdxAqp1XG_StovhqeJ9QVFhTOCHZKXKuIoV4fcThJg9s0DVqx58Ato06bu1Jhj8etAeJNYRj05mHJvh6kNOEMUaaUKK2ud0sxoaKqKsZxVszrY6CK-SxId3jj3q0jKuGhzfcjV8-2FT9Klc-FQXZ8o6U_SCH8HjeR6e8VqW8aBUhm-FSRosB8rxT7aM6sdFdxRHMRSwe5aE6aODnJk1mytog0tCENVPIQ5-j53sIxA9GK5bXscWlxLWuRag6ZgD5l6MAEPFibh2SgRWQRoPAVWb61MpOtUbaRjU8vfrhITIM9sshO9HcwdsJ5kSb9tXBhi3pYPwoWwFTt5HelyqOYd5LbswJiN0iR0gC_Y1HKaLZDaUpZgEAU5J2rRSTsugfKunPpNF0JHPP4g4t8qgf7iPG3qr335h6BmFwYrT2q50eyQf5HUpA1Ht_xTGK_FDd0ntsOcyrflfM3WRBLy8ApJaz6yf9pyhLJ2Fzo121qVeoWSzz1jbcxLfKgCqx8CCvqqy2EcC6yiAEywThf5peK_udrwmVc_UQB9itR_igBPh5MJOav4oIOlToymmqlUGnygzB5QDI1FqZ6Uqqmsqg5fxdpPVU5V4mzOyQNRRvQkqZmy6JxDBKnLplAdcoF1kMwlHaDr1P9IEQgKCG6qS7nm0BvgV2IN1bf0oam9TuRY3dqxKEW1XZbd8wG_FrAnWCXvTF6jdDHzS1Mf3-gkAE-Ps0p7n0576XWL99RpXDiEKZHJmqMvvt0aaSvBORFV8618OiMLoI43SHDFK9qmbWGA4iGWNZeMvJtQ4SSpehLAW2zBYY2bgPv6cPS-q1GgNZs8lShZrH7qdgQoZj-DNFoQ6W6SpJJjOLlUzwbiqZQ3-c7PB1zMEk0ZVNUgU2w7yOF3oa3RFR1WMs1HMrye7igxrZ5EBNqe0p_4sPnOpQbYPyKO4W5dyrA7vj8IcKiSz2sIqumZwY1efgh63zcEk4rdDRb2BqlgbHkNZBrBDrlYO-KGFcSIrr1jZv0IYU57zA_eziRTeHRbjUDeQ7c4lea9jow70C_OrNx3JztkHauMaYNs4xQTDGPX8EUBIV_TLT1y1mUzLXI48-Zdn-7ekX_-YduAVhLHNrxCeVj-EBZiX-tJavCEp08JT7DtTMLnzfhEeSuRGAPqMSXP0sJ5qf9-VhuBM0XHJ4qmbHnrq31utx-xcg1zsQQuf5Mx_5EMU5Sdgi6uHgaErtBY-H24E-GNjlK7xWgfEfrDWbycvKVbE6PESoAvuQmwa4r6rq4qwL-FBRaomEzGoylCakQEKAETiu5gD5v3Ac37TDR6mqOtm-0NSARDr7gPLfxPzFQcudrjJUnSlBw5_y-NtJqyaOP1DFZQPjP7NzZDaiqsNX4RGoCmPoJw-Ggz9_eAlqm0oi1e1Zbcbf8DVKXbYvOpF2VkNqO9sK19Kn0CIKmdONk72dN09XbT_IJ11VyV]--></g></svg>