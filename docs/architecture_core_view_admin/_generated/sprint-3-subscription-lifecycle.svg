<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="1623px" preserveAspectRatio="none" style="width:1739px;height:1623px;background:#FFFFFF;" version="1.1" viewBox="0 0 1739 1623" width="1739px" zoomAndPan="magnify"><title>Sprint 3: Subscription Lifecycle State Diagram</title><defs/><g><g class="title" data-source-line="2"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="575.5234" x="577.3247" y="35.4209">Sprint 3: Subscription Lifecycle State Diagram</text></g><g id="Trial"><rect fill="#BBDEFB" height="50" rx="12.5" ry="12.5" style="stroke:#1976D2;stroke-width:1;" width="85.2354" x="12" y="187.4494"/><line style="stroke:#1976D2;stroke-width:1;" x1="12" x2="97.2354" y1="213.7462" y2="213.7462"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.2354" x="22" y="205.4445">TRIALING</text></g><g id="Active"><rect fill="#C8E6C9" height="50" rx="12.5" ry="12.5" style="stroke:#388E3C;stroke-width:1;" width="70.4561" x="650.39" y="387.8094"/><line style="stroke:#388E3C;stroke-width:1;" x1="650.39" x2="720.8461" y1="414.1063" y2="414.1063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50.4561" x="660.39" y="405.8045">ACTIVE</text></g><g id="PastDue"><rect fill="#FFE0B2" height="50" rx="12.5" ry="12.5" style="stroke:#F57C00;stroke-width:1;" width="92.3311" x="196.45" y="633.6994"/><line style="stroke:#F57C00;stroke-width:1;" x1="196.45" x2="288.7811" y1="659.9962" y2="659.9962"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72.3311" x="206.45" y="651.6945">PAST_DUE</text></g><g id="Cancelled"><rect fill="#FFCDD2" height="50" rx="12.5" ry="12.5" style="stroke:#C62828;stroke-width:1;" width="103.6719" x="540.78" y="1091.3194"/><line style="stroke:#C62828;stroke-width:1;" x1="540.78" x2="644.4519" y1="1117.6162" y2="1117.6162"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.6719" x="550.78" y="1109.3145">CANCELLED</text></g><g id="Expired"><rect fill="#FFCDD2" height="50" rx="12.5" ry="12.5" style="stroke:#C62828;stroke-width:1;" width="80.3613" x="552.44" y="1511.2494"/><line style="stroke:#C62828;stroke-width:1;" x1="552.44" x2="632.8013" y1="1537.5462" y2="1537.5462"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="60.3613" x="562.44" y="1529.2445">EXPIRED</text></g><g id="Paused"><rect fill="#FFCDD2" height="50" rx="12.5" ry="12.5" style="stroke:#C62828;stroke-width:1;" width="76.7793" x="954.23" y="633.6994"/><line style="stroke:#C62828;stroke-width:1;" x1="954.23" x2="1031.0093" y1="659.9962" y2="659.9962"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="56.7793" x="964.23" y="651.6945">PAUSED</text></g><ellipse cx="54.62" cy="67.6094" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><g class="entity" data-entity="GMN2" data-source-line="23" data-uid="ent0003" id="entity_GMN2"><path d="M132.25,169.6094 L132.25,208.4494 L97.68,212.4494 L132.25,216.4494 L132.25,255.2734 A0,0 0 0 0 132.25,255.2734 L326.9917,255.2734 A0,0 0 0 0 326.9917,255.2734 L326.9917,179.6094 L316.9917,169.6094 L132.25,169.6094 A0,0 0 0 0 132.25,169.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M316.9917,169.6094 L316.9917,179.6094 L326.9917,179.6094 L316.9917,169.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="84.938" x="138.25" y="186.6763">Trial Period</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.0522" x="138.25" y="201.8091">- Free trial active</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.6372" x="138.25" y="216.9419">- No payment required yet</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.792" x="138.25" y="232.0747">- Limited to trial period</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173.7417" x="138.25" y="247.2075">- Can be converted to paid</text></g><g class="entity" data-entity="GMN5" data-source-line="31" data-uid="ent0006" id="entity_GMN5"><path d="M906.67,347.2794 L906.67,408.8094 L721.03,412.8094 L906.67,416.8094 L906.67,478.3419 A0,0 0 0 0 906.67,478.3419 L1204.5675,478.3419 A0,0 0 0 0 1204.5675,478.3419 L1204.5675,357.2794 L1194.5675,347.2794 L906.67,347.2794 A0,0 0 0 0 906.67,347.2794" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1194.5675,347.2794 L1194.5675,357.2794 L1204.5675,357.2794 L1194.5675,347.2794" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="142.6509" x="912.67" y="364.3463">Active Subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.7314" x="912.67" y="379.4791">- Payment successful</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.0098" x="912.67" y="394.6119">- Full access to features</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.9375" x="912.67" y="409.7447">- Auto-renewal enabled</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.8682" x="912.67" y="424.8775">- Can be:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="268.6328" x="920.9346" y="440.0103">&#8226; Cancelled (immediate or at period end)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.1543" x="920.9346" y="455.1431">&#8226; Upgraded/downgraded</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.8682" x="920.9346" y="470.276">&#8226; Paused</text></g><g class="entity" data-entity="GMN8" data-source-line="42" data-uid="ent0009" id="entity_GMN8"><path d="M324.26,570.4694 L324.26,654.6994 L289.28,658.6994 L324.26,662.6994 L324.26,746.9303 A0,0 0 0 0 324.26,746.9303 L522.969,746.9303 A0,0 0 0 0 522.969,746.9303 L522.969,580.4694 L512.969,570.4694 L324.26,570.4694 A0,0 0 0 0 324.26,570.4694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M512.969,570.4694 L512.969,580.4694 L522.969,580.4694 L512.969,570.4694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113.8198" x="330.26" y="587.5363">Payment Failed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="138.0933" x="330.26" y="602.6691">- Last payment failed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.709" x="330.26" y="617.8019">- Retry attempts scheduled</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.5444" x="330.26" y="632.9347">- Grace period active</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.8403" x="330.26" y="648.0675">- Limited or full access</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.3364" x="338.5246" y="663.2003">(configurable)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="330.26" y="678.3331">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110.7095" x="330.26" y="693.466">Admin Actions:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.1553" x="330.26" y="708.5988">- Retry payment manually</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.7505" x="330.26" y="723.7316">- Contact customer</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.2905" x="330.26" y="738.8644">- Cancel subscription</text></g><g class="entity" data-entity="GMN11" data-source-line="56" data-uid="ent0012" id="entity_GMN11"><path d="M679.09,1020.5294 L679.09,1112.3194 L644.94,1116.3194 L679.09,1120.3194 L679.09,1212.1231 A0,0 0 0 0 679.09,1212.1231 L868.1379,1212.1231 A0,0 0 0 0 868.1379,1212.1231 L868.1379,1030.5294 L858.1379,1020.5294 L679.09,1020.5294 A0,0 0 0 0 679.09,1020.5294" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M858.1379,1020.5294 L858.1379,1030.5294 L868.1379,1030.5294 L858.1379,1020.5294" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168.0479" x="685.09" y="1037.5963">Cancelled Subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.8545" x="685.09" y="1052.7291">- User or admin cancelled</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160.6528" x="685.09" y="1067.8619">- Access until period end</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.4365" x="693.3546" y="1082.9947">(or immediate)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.3716" x="685.09" y="1098.1275">- No auto-renewal</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.793" x="685.09" y="1113.2603">- Can be reactivated</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="685.09" y="1128.3931">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66.46" x="685.09" y="1143.526">Reasons:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.8042" x="685.09" y="1158.6588">- Customer request</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.3413" x="685.09" y="1173.7916">- Non-payment</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="46.103" x="685.09" y="1188.9244">- Fraud</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.7397" x="685.09" y="1204.0572">- Service violation</text></g><g class="entity" data-entity="GMN14" data-source-line="71" data-uid="ent0015" id="entity_GMN14"><path d="M667.57,1455.5794 L667.57,1532.2494 L633.22,1536.2494 L667.57,1540.2494 L667.57,1616.9075 A0,0 0 0 0 667.57,1616.9075 L847.674,1616.9075 A0,0 0 0 0 847.674,1616.9075 L847.674,1465.5794 L837.674,1455.5794 L667.57,1455.5794 A0,0 0 0 0 667.57,1455.5794" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M837.674,1455.5794 L837.674,1465.5794 L847.674,1465.5794 L837.674,1455.5794" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152.4834" x="673.57" y="1472.6463">Expired Subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.6943" x="673.57" y="1487.7791">- Period ended</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.7192" x="673.57" y="1502.9119">- No payment received</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="74.439" x="673.57" y="1518.0447">- No access</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.083" x="673.57" y="1533.1775">- Can be renewed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="673.57" y="1548.3103">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="114.9814" x="673.57" y="1563.4431">Common Paths:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.104" x="673.57" y="1578.576">- Trial expired &#8594; Expired</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.248" x="673.57" y="1593.7088">- Cancelled &#8594; Expired</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.4019" x="673.57" y="1608.8416">- Past Due &#8594; Expired</text></g><g class="entity" data-entity="GMN17" data-source-line="84" data-uid="ent0018" id="entity_GMN17"><path d="M1549.06,593.1694 L1549.06,724.2319 L1732.1728,724.2319 L1732.1728,603.1694 L1722.1728,593.1694 L1549.06,593.1694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1722.1728,593.1694 L1722.1728,603.1694 L1732.1728,603.1694 L1722.1728,593.1694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="150.3379" x="1555.06" y="610.2363">Paused Subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162.1128" x="1555.06" y="625.3691">- Temporarily suspended</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.2563" x="1555.06" y="640.5019">- No billing during pause</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.8892" x="1555.06" y="655.6347">- Can be resumed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75.9243" x="1555.06" y="670.7675">- Useful for:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.123" x="1563.3246" y="685.9003">&#8226; Seasonal businesses</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.7813" x="1563.3246" y="701.0331">&#8226; Customer request</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.6079" x="1563.3246" y="716.166">&#8226; Admin action</text></g><g class="entity" data-entity="GMN20" data-source-line="118" data-uid="ent0021" id="entity_GMN20"><path d="M1168.79,854.0694 L1168.79,1378.585 L1536.4355,1378.585 L1536.4355,864.0694 L1526.4355,854.0694 L1168.79,854.0694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1526.4355,854.0694 L1526.4355,864.0694 L1536.4355,864.0694 L1526.4355,854.0694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="182.8062" x="1174.79" y="871.1363">Admin Actions Available:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1174.79" y="886.2691">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99.7407" x="1174.79" y="901.4019">From ACTIVE:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="245.7939" x="1174.79" y="916.5347">- Cancel (immediate or at period end)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.7642" x="1174.79" y="931.6675">- Pause (suspend billing)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247.9077" x="1174.79" y="946.8003">- Upgrade plan (change to higher tier)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="260.8315" x="1174.79" y="961.9331">- Downgrade plan (change to lower tier)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.1104" x="1174.79" y="977.066">- Extend period (add time)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1174.79" y="992.1988">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.04" x="1174.79" y="1007.3316">From PAST_DUE:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.9937" x="1174.79" y="1022.4644">- Retry payment (manual)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.2905" x="1174.79" y="1037.5972">- Cancel subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.7021" x="1174.79" y="1052.73">- Extend grace period</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1174.79" y="1067.8628">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132.6343" x="1174.79" y="1082.9956">From CANCELLED:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="221.3174" x="1174.79" y="1098.1285">- Reactivate (if before period end)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="186.9512" x="1174.79" y="1113.2613">- Issue refund (partial or full)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1174.79" y="1128.3941">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106.6724" x="1174.79" y="1143.5269">From PAUSED:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.9551" x="1174.79" y="1158.6597">- Resume subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.2905" x="1174.79" y="1173.7925">- Cancel subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1174.79" y="1188.9253">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110.4429" x="1174.79" y="1204.0581">From EXPIRED:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.7339" x="1174.79" y="1219.191">- Create new subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1174.79" y="1234.3238">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="187.1289" x="1174.79" y="1249.4566">Service Architecture (DI):</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="346.6455" x="1174.79" y="1264.5894">SubscriptionService implements ISubscriptionService</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="191.2612" x="1174.79" y="1279.7222">- cancelSubscription(id, data)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.5249" x="1174.79" y="1294.855">- reactivateSubscription(id)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="194.9556" x="1174.79" y="1309.9878">- updateSubscription(id, data)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="199.3228" x="1174.79" y="1325.1206">- retryPayment(subscriptionId)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1174.79" y="1340.2535">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="235.0283" x="1174.79" y="1355.3863">All actions use dependency-injected</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="248.4155" x="1174.79" y="1370.5191">IApiClient for backend communication</text></g><g class="entity" data-entity="GMN23" data-source-line="155" data-uid="ent0024" id="entity_GMN23"><path d="M1148.74,555.3394 L1148.74,762.0659 L1514.4939,762.0659 L1514.4939,565.3394 L1504.4939,555.3394 L1148.74,555.3394" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1504.4939,555.3394 L1504.4939,565.3394 L1514.4939,565.3394 L1504.4939,555.3394" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="126.1787" x="1154.74" y="572.4063">SOLID Principles:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1154.74" y="587.5391">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.9009" x="1154.74" y="602.6719">SRP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="237.8276" x="1183.6409" y="602.6719">: Each state has single responsibility</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30.1196" x="1154.74" y="617.8047">OCP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="314.6343" x="1184.8596" y="617.8047">: Can add new states without modifying existing</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27.1743" x="1154.74" y="632.9375">LSP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="297.8193" x="1181.9143" y="632.9375">: ISubscriptionService ensures substitutability</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.7275" x="1154.74" y="648.0703">ISP</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="306.7505" x="1178.4675" y="648.0703">: Specific interfaces for subscription operations</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.6279" x="1154.74" y="663.2031">DI</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="269.9277" x="1170.3679" y="663.2031">: Service injected into store for testability</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1154.74" y="678.336">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87.1597" x="1154.74" y="693.4688">Clean Code:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.6577" x="1154.74" y="708.6016">- Clear state names</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.9019" x="1154.74" y="723.7344">- Explicit transitions</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.6104" x="1154.74" y="738.8672">- Well-documented reasons</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="143.1333" x="1154.74" y="754">- Predictable behavior</text></g><!--link *start* to Trial--><g class="link" data-entity-1=".start." data-entity-2="Trial" data-source-line="94" data-uid="lnk3" id="link_.start._Trial"><path d="M54.62,77.9794 C54.62,99.8894 54.62,149.0294 54.62,181.1694" fill="none" id="*start*-to-Trial" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="54.62,187.1694,58.62,178.1694,54.62,182.1694,50.62,178.1694,54.62,187.1694" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.9272" x="55.62" y="120.6763">User subscribes</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="57.3447" x="78.4113" y="135.8091">with trial</text></g><!--link Trial to Active--><g class="link" data-entity-1="Trial" data-entity-2="Active" data-source-line="96" data-uid="lnk4" id="link_Trial_Active"><path d="M85.46,237.9394 C94.48,244.2594 104.61,250.5894 114.62,255.2794 C305.89,344.9094 552.0971,390.5404 644.1271,405.4404" fill="none" id="Trial-to-Active" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="650.05,406.3994,641.805,401.0124,645.1143,405.6003,640.5264,408.9096,650.05,406.3994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.4146" x="272.7715" y="298.3463">Trial period ends</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.9575" x="266.5" y="313.4791">Payment succeeds</text></g><!--link Trial to Expired--><g class="link" data-entity-1="Trial" data-entity-2="Expired" data-source-line="97" data-uid="lnk5" id="link_Trial_Expired"><path d="M48.75,237.7094 C40.28,274.9294 25.62,348.4594 25.62,411.8094 C53.62,1616.9094 53.62,1616.9094 25.62,1117.3194 C25.62,1379.3294 416.9241,1494.1058 546.4541,1525.0358" fill="none" id="Trial-to-Expired" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="552.29,1526.4294,544.4651,1520.4484,547.4267,1525.2681,542.6071,1528.2297,552.29,1526.4294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.4146" x="38.9408" y="655.7663">Trial period ends</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.0562" x="26.62" y="670.8991">No payment method</text></g><!--link Active to Active--><g class="link" data-entity-1="Active" data-entity-2="Active" data-source-line="99" data-uid="lnk6" id="link_Active_Active"><path d="M721.03,393.9894 C739.34,391.0894 755.85,397.3694 755.85,412.8094 C755.85,428.2494 745.2666,435.4548 726.9566,432.5648" fill="none" id="Active-to-Active" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="721.03,431.6294,729.2963,436.9836,725.9689,432.4089,730.5436,429.0815,721.03,431.6294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.9575" x="761.85" y="409.8763">Payment succeeds</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="95.8813" x="774.8881" y="425.0091">(auto-renewal)</text></g><!--link Active to PastDue--><g class="link" data-entity-1="Active" data-entity-2="PastDue" data-source-line="101" data-uid="lnk7" id="link_Active_PastDue"><path d="M650.1,416.4594 C557.26,424.1694 310.95,449.8394 258.62,508.3394 C227.93,542.6494 230.9621,594.7313 236.4221,627.4413" fill="none" id="Active-to-PastDue" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="237.41,633.3594,239.8736,623.8236,236.5868,628.4276,231.9828,625.1408,237.41,633.3594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.1689" x="259.62" y="521.4063">Payment fails</text></g><!--link PastDue to Active--><g class="link" data-entity-1="PastDue" data-entity-2="Active" data-source-line="105" data-uid="lnk10" id="link_PastDue_Active"><path d="M252.87,633.3894 C263.48,610.6894 281.96,577.1294 306.62,555.3394 C359.97,508.1894 560.7626,448.5687 644.3926,425.1287" fill="none" id="PastDue-to-Active" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="650.17,423.5094,640.4244,422.0867,645.3555,424.8588,642.5835,429.7899,650.17,423.5094" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.5679" x="390.65" y="521.4063">Payment retry succeeds</text></g><!--link Active to Cancelled--><g class="link" data-entity-1="Active" data-entity-2="Cancelled" data-source-line="102" data-uid="lnk8" id="link_Active_Cancelled"><path d="M670.6,438.2794 C654.67,465.6694 630.35,511.9094 619.62,555.3394 C569.77,757.0794 583.8214,1005.8277 590.0114,1084.8477" fill="none" id="Active-to-Cancelled" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="590.48,1090.8294,593.7649,1081.5445,590.0895,1085.8446,585.7894,1082.1692,590.48,1090.8294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.7593" x="620.62" y="663.2663">User/admin cancels</text></g><!--link Cancelled to Active--><g class="link" data-entity-1="Cancelled" data-entity-2="Active" data-source-line="110" data-uid="lnk14" id="link_Cancelled_Active"><path d="M594.81,1091.0494 C600.04,1042.9394 616.35,933.2894 661.62,854.0694 C690.15,804.1294 730.75,815.2594 752.62,762.0694 C787.55,677.0894 772.76,644.9794 752.62,555.3394 C742.78,511.5794 720.8988,470.5612 704.3788,443.2912" fill="none" id="Cancelled-to-Active" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="701.27,438.1594,702.512,447.9296,703.8607,442.4359,709.3544,443.7845,701.27,438.1594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.4854" x="778.6036" y="655.7663">Admin reactivates</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.4326" x="774.63" y="670.8991">(before period end)</text></g><!--link Active to Paused--><g class="link" data-entity-1="Active" data-entity-2="Paused" data-source-line="103" data-uid="lnk9" id="link_Active_Paused"><path d="M712.1,438.1894 C740.35,463.0894 787.32,501.3894 833.62,525.3394 C872.57,545.4894 892.89,528.5594 927.62,555.3394 C954.12,575.7794 970.343,604.8366 980.673,628.0766" fill="none" id="Active-to-Paused" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="983.11,633.5594,983.1096,623.7105,981.0791,628.9904,975.7992,626.9599,983.11,633.5594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.7935" x="834.62" y="521.4063">Admin pauses</text></g><!--link Paused to Active--><g class="link" data-entity-1="Paused" data-entity-2="Active" data-source-line="112" data-uid="lnk15" id="link_Paused_Active"><path d="M988.66,633.4494 C982.13,600.8294 966.1,542.9394 930.62,508.3394 C899.85,478.3394 787.3226,442.9406 727.0826,425.4706" fill="none" id="Paused-to-Active" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="721.32,423.7994,728.8497,430.1479,726.1221,425.192,731.078,422.4644,721.32,423.7994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.5815" x="945.86" y="521.4063">Admin resumes</text></g><!--link PastDue to Cancelled--><g class="link" data-entity-1="PastDue" data-entity-2="Cancelled" data-source-line="106" data-uid="lnk11" id="link_PastDue_Cancelled"><path d="M243.07,684.1794 C244.68,717.7894 251.21,779.1794 276.62,824.0694 C345.99,946.6194 479.8146,1043.5267 547.9846,1087.6967" fill="none" id="PastDue-to-Cancelled" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="553.02,1090.9594,547.642,1082.7085,548.8238,1088.2405,543.2918,1089.4224,553.02,1090.9594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.645" x="277.62" y="812.6363">Max retries exceeded</text></g><!--link PastDue to Cancelled--><g class="link" data-entity-1="PastDue" data-entity-2="Cancelled" data-source-line="107" data-uid="lnk12" id="link_PastDue_Cancelled"><path d="M251.64,684.1694 C261.56,707.6494 279.74,742.3594 306.62,762.0694 C349.57,793.5494 380.87,758.9994 422.62,792.0694 C524.27,872.5794 570.5452,1024.9184 585.6352,1085.2984" fill="none" id="PastDue-to-Cancelled-1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="587.09,1091.1194,588.7885,1081.4181,585.8777,1086.2686,581.0272,1083.3578,587.09,1091.1194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.6753" x="452.56" y="812.6363">Admin cancels</text></g><!--link Cancelled to Expired--><g class="link" data-entity-1="Cancelled" data-entity-2="Expired" data-source-line="109" data-uid="lnk13" id="link_Cancelled_Expired"><path d="M592.62,1141.5994 C592.62,1215.4594 592.62,1430.9494 592.62,1504.8994" fill="none" id="Cancelled-to-Expired" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="592.62,1510.8994,596.62,1501.8994,592.62,1505.8994,588.62,1501.8994,592.62,1510.8994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.394" x="593.62" y="1421.6463">Period ends</text></g><!--link Paused to Cancelled--><g class="link" data-entity-1="Paused" data-entity-2="Cancelled" data-source-line="113" data-uid="lnk16" id="link_Paused_Cancelled"><path d="M981.52,684.0094 C970.37,706.3994 951.44,739.4594 927.62,762.0694 C886.91,800.6894 870.3,804.7394 817.62,824.0694 C751.33,848.3794 713.22,805.8694 661.62,854.0694 C593.74,917.4694 589.3949,1033.0822 590.9949,1084.9322" fill="none" id="Paused-to-Cancelled" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="591.18,1090.9294,594.9005,1081.8103,591.0258,1085.9318,586.9043,1082.057,591.18,1090.9294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.6753" x="891.21" y="812.6363">Admin cancels</text></g><!--link Expired to Active--><g class="link" data-entity-1="Expired" data-entity-2="Active" data-source-line="115" data-uid="lnk17" id="link_Expired_Active"><path d="M604.67,1510.7894 C614.52,1493.1294 630,1469.9594 649.62,1455.5794 C738.6,1390.3494 809.85,1458.7894 885.62,1378.5794 C1080.24,1172.5494 1007.94,1042.5494 1048.62,762.0694 C1093.34,453.7094 1059,512.3894 1055.62,508.3394 C1031.58,479.5694 926.01,487.3394 889.62,478.3394 C829.76,463.5294 767.4129,442.7723 727.0029,428.6223" fill="none" id="Expired-to-Active" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="721.34,426.6394,728.5124,433.389,726.0591,428.2918,731.1562,425.8385,721.34,426.6394" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80.7485" x="1060.9168" y="805.1363">User renews</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.7822" x="1045.4" y="820.2691">New subscription</text></g><!--link Paused to GMN17--><g class="link" data-entity-1="Paused" data-entity-2="GMN17" data-source-line="84" data-uid="lnk19" id="link_Paused_GMN17"><path d="M1010.61,633.4694 C1036.64,599.4094 1088.39,540.2694 1149.12,516.8394 C1224.79,487.6494 1440.1,483.6694 1514.12,516.8394 C1549.5,532.6994 1579.05,563.8794 1600.67,592.9894" fill="none" id="Paused-GMN17" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link GMN17 to GMN20--><g class="link" data-entity-1="GMN17" data-entity-2="GMN20" data-source-line="118" data-uid="lnk22" id="link_GMN17_GMN20"><path d="M1599.66,724.4994 C1577.45,759.6294 1548.38,805.6294 1518.01,853.6694" fill="none" id="GMN17-GMN20" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link GMN23 to GMN20--><g class="link" data-entity-1="GMN23" data-entity-2="GMN20" data-source-line="155" data-uid="lnk25" id="link_GMN23_GMN20"><path d="M1336.36,762.5194 C1337.63,790.2094 1339.07,821.4694 1340.56,853.6494" fill="none" id="GMN23-GMN20" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--SRC=[XLVTRjis5BxNKt3TZMFCQDTYRMeK1HpPAGnuhH4dsu1r66ZgsEOgaHf99J660RlQ0-mHzcXzaXt-IPIZTBjPQdxdxpk_-ieSe09IbvIBp71J0jdKYWj3Nap9fjbgfdXjk1HanNV0Zim233L0vfpk5QsoJ7_YegRu9z7kuO-Cu7yNb7tQAzc88fUbL6_UK6RuBRnzIxxEpnSlyzSU9LK1wW7YnVdvuaK-h8UB3dTvcS_dpnzgIZ7vo-Vdpy-7THd5QMb15nVpnUN5GqKjuDlNhrv6IwTQQYMt9LJUeSMpYm67KiXth_9dpx8_aJX7rvFhg-LijNp_xWcXcbnRWwGr736p_7hvmy8XPYuoqj4LCUlPvlhN-Or7hQasyyR2MjCHby_UvulLQZ5tm9mA1cK91KbfYzZ5J-lbLK0kxckk7i6jPpUR05lJHf-YCY4HfVZ-O8ZS-I0TIUEn3tWDYijYF7O_JiYb0Y2E0k9rXD_VIrBJOmLOdWf-RvmxHp3XTSKhRl0N8uDixRI6LmoKR84mAMv11LXDUP61A8ZrxzJBMMTvF0wifntHUhiEBkc6CT1wrvGnZAQq0TWVhRKTKDCeqE5rrXWvKI3W3bq5GJ5BVL-dxb-4VFxhtoHD8rvLK71BkrI4cX0bQYZE4e6R6hkpWE9f8U-4_pDvzKbwDFHGFI7s6DybvUX06_OAGMqwTkujl5o1KKTqpK1L6qqqEq3HTC_l56KGtUxbDsOG0zjrt0M_HvYw7TytoZ9rbiN451KNBbTIw6dhd7SXUbTHqT2oF4PwfJ1ebx166rc1wbX7ZZ6DNOuVPQZDHt2ZoyzWYTneK2vTpblM4yPAy2NI2CFB99qnRfHhStxMTG9DwgTVumeSgmWl8arNG7MFe3p4xXe9j6drYabWhUr5saH7Dw1kEURkbikIVf6VC2o2zJWwXjkd3RWbfDVd3B10afUaA9A8aOOksbnM5QwiDJM796G_QY3uyldlVtfUJf8UU_XcEuBOWPe-FTu-hhjYzxXvE1ZwDJQ8L5JnyeXbf-iJ3hQyBBdOaw9Hzd-rrNGQjswgLWIh3Dk6xAHAHyV6fHuZtpQQ2wGET3fOXkh0F_dMekmaqJ-FVo6JoTj0vzJNTcYQBUYFuewRWv_0MUP15Xucw3J8TMME4hq92eLEn6Bf3CebTLA1EU2ipuAPdiLJzH_5A6sUivvKt9oTc9rjEeLqXUAZVvgsjUuhSycV1YvT1dMMHHk3NYetkbegKcng-7jwxw0SDDQqnM8TF0QUzHpCkgS-nLqhwXDCwwNNr4qOI-OMiEIWjuYo4FcWhArPdIA-u6fqhgV8bPpBdYq2kElFRD-DMscmi8Us19dTOaRj5h6p8I0kbQo8FxEI8Uatml-kt8bFD1c59ewT6r_3ChPdji0zTg1Y3_OYEE34m4WC1nMXyxYk7u1BUNU2NTmRQonuCw857ZMywdQZYocUXO_jnf5VZcTVM88zQ_jaU_SCjNTbQYcM2NAu8mDrud5BhHixp7PuL9CHVamOs-hX2ZWDnrwQgGbRJKF-3aMIQWgtRP9jh6hqL3oe9oyKbzzCiGDUASpUScGqNvv53Uc8Zs1UrNXy8y-QB0VUWsLVxUdxY1VVa88Q6YdgEku45W5DNJnyFDM1YGzZPfI6k2m2oREo30CVpn4iw0BSJXBiEE7YDumvx9hbhEPvoTrqn3HjyPF8rWR3lTi8pWPl0oFhoEI7rN9ErhZK64TwTDA6cwlrU3mb2yeEuNFoWDyKkBVsfTjsDNh6iRkuEGQ93xcJi0lHDe3BdXNKnEuXsU1ga0NV7Uq6XNkk3VuHH5SR9pgK6AnERMzrLmduNTmOshEwzAAR6XZVSKRmYndK3Zj3Eq9ISed4WdUCw20yNphPM2A1MAj3ek-sHQmE3A4r6k-Q4Z3CN1QGL2t-fW9NWbRjvmKEpf8pRd0JK-IiipyXF-AidHIIDROGqB3ons4SPJXkEJDsFcB77YWUUwhBvNy0]--></g></svg>